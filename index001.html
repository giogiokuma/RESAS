<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>RESAS API</title>
<script src="https://d3js.org/d3-collection.v1.min.js"></script>
<script src="https://d3js.org/d3-dispatch.v1.min.js"></script>
<script src="https://d3js.org/d3-dsv.v1.min.js"></script>
<script src="https://d3js.org/d3-request.v1.min.js"></script>
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.1.1/d3.min.js"></script>  -->

</head>
<body>

<div id="app"></div>

<script>
var url = "https://opendata.resas-portal.go.jp/api/v1-rc.1/oldCities?prefCode=2&cityCode=02201"
d3.request(url)
    .header("X-API-KEY", "2tuRiAulZpl0l2EvgqfZKacOui7nVGDoXhOKKJQ0")
    .mimeType("application/json")
    .response(function(xhr) { return JSON.parse(xhr.responseText) })
    .get(callback)
    
function callback(json){
    console.log(json)
    for ( i = 0; i < json.result.length; i++ ) {
        document.getElementById("app").innerHTML += "a" + json.result[i].prefName + "<br />";

    }
}



</script>
</body>
</html>