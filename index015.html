<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>RESAS API</title>
<script src="https://d3js.org/d3-request.v1.min.js"></script>
<script src="https://d3js.org/d3.v4.min.js"></script>
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.1.1/d3.min.js"></script>  -->

</head>
<body>



<div id="app"></div>
<script>
var url = "https://opendata.resas-portal.go.jp/api/v1/population/composition/perYear?cityCode=11362&prefCode=11"
d3.request(url)
    .header("X-API-KEY", "2tuRiAulZpl0l2EvgqfZKacOui7nVGDoXhOKKJQ0")
    .mimeType("application/json")
    .response(function(xhr) { return JSON.parse(xhr.responseText) })
    .get(callback);
   
function callback(json){
    //console.log(json);
    //console.log(json.result)
    //console.log(json.result["data"])
    console.log(json.result["data"])
    console.log(json.result["data"][1]["data"])

    for ( i = 0; i < json.result["data"].length; i++ ) {
        document.getElementById("app").innerHTML += json.result["data"][i].label + "<br />";

    }

    for ( i = 0; i < json.result["data"][0]["data"].length; i++ ) {
        document.getElementById("app").innerHTML += json.result["data"][0]["data"][i].value + "<br />";

    }

}






</script>
</body>
</html>